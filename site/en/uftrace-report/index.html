<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Uftrace report - uftrace</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Uftrace report";
        var mkdocs_page_input_path = "en/uftrace-report.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> uftrace
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">en</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../uftrace/">home</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ko</span></p>
              <ul>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">uftrace</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Uftrace report</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p>% UFTRACE-REPORT(1) Uftrace User Manuals
% Namhyung Kim <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#97;&#109;&#104;&#121;&#117;&#110;&#103;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#110;&#97;&#109;&#104;&#121;&#117;&#110;&#103;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a>
% Sep, 2018</p>
<h1 id="name">NAME</h1>
<p>uftrace-report - Print statistics and summary for trace data</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p>uftrace report [<em>options</em>]</p>
<h1 id="description">DESCRIPTION</h1>
<p>This command collects trace data from a given data file and prints statistics
and summary information.  It shows function statistics by default, but can show
task statistics with the <code>--task</code> option and show differences between traces
with the <code>--diff</code> option.</p>
<h1 id="report-options">REPORT OPTIONS</h1>
<p>-f <em>FIELD</em>, --output-fields=<em>FIELD</em>
:   Customize field in the output.  Possible values are: <code>total</code>, <code>total-avg</code>,
    <code>total-min</code>, <code>total-max</code>, <code>total-stdv</code>, <code>self</code>, <code>self-avg</code>, <code>self-min</code>, <code>self-max</code>,
    <code>self-stdv</code>, <code>size</code>, <code>call</code> and <code>all</code>.  Multiple fields can be set by using comma.
    Special field of 'none' can be used (solely) to hide all fields and 'all' can be used
    to show all fields.
    Default is 'total,self,call'. See <em>FIELDS</em>.
    <code>stdv</code> stands for the relative standard deviation (RSD),
    which is the standard deviation expressed as a percentage of the mean.
    The relative standard deviation is calculated using the formula:</p>
<pre><code>\[ RSD = \left( \frac{\sigma}{\mu} \right) \times 100\% \]

where:
- \( \sigma \) represents the standard deviation.
- \( \mu \) represents the mean of the function's time.
</code></pre>
<p>-s <em>KEYS</em>[,<em>KEYS</em>,...], --sort=<em>KEYS</em>[,<em>KEYS</em>,...]
:   Sort functions by given KEYS.  Multiple KEYS can be given, separated by
    comma (,).  Possible keys are <code>total</code> (time), <code>total-avg</code>, <code>total-min</code>,
    <code>total-max</code>, <code>total-stdv</code>, <code>self</code> (time), <code>self-avg</code>, <code>self-min</code>, <code>self-max</code>,
    <code>self-stdv</code>, <code>size</code>, <code>call</code> and <code>func</code>.  But if either <code>--avg-total</code> or
    <code>--avg-self</code> is used, the possible keys can be <code>avg</code>, <code>min</code> and <code>max</code>
    that apply to total or self time respectively.</p>
<p>--avg-total
:   Show average, min, max, relative standard deviation of each function's total time.</p>
<p>--avg-self
:   Show average, min, max, relative standard deviation of each function's self time.</p>
<p>--task
:   Report task summary information rather than function statistics.
    Customize field in the output with -f option. Possible values are: <code>total</code>,
    <code>self</code>, <code>func</code> and <code>tid</code>.  Multiple fields can be set by using comma.
    Special field of 'none' can be used (solely) to hide all fields.
    Default is 'total,self,func,tid'.  See <em>TASK FIELDS</em>.</p>
<p>--diff=<em>DATA</em>
:   Report differences between the input trace data and the given DATA.</p>
<p>--diff-policy=<em>POLICY</em>
:   Apply custom diff policy.  Available values are: "abs", "no-abs", "percent",
    "no-percent", "compact" and "full".  The "abs" is to sort diff result using
    absolute value so positive and negative entries can be shown together while
    "no-abs" will show positive entries first and then negative ones.  The
    "percent" is to show diff in percentage while "no-percent" is to show the
    values.  The "full" is to show all three columns of baseline, new data and
    difference while "compact" only shows the difference.  The default is "abs",
    "compact" and "no-percent".</p>
<p>--sort-column=<em>IDX</em>
:   When <code>--diff</code> is used with "full" policy, 3 columns will be shown for each
    total time, self time and call count.  This option selects the index of the
    column to be used as a sort key.  Index 0 is for original data given by the
    <code>--data</code> option, index 1 is for data given by the <code>--diff</code> option, and index
    2 is for (percentage) differences between the two data.</p>
<p>--srcline
:   Show source location of each function if available.</p>
<p>--format=<em>TYPE</em>
:   Show format style output. Currently, normal and html styles are supported.</p>
<h1 id="common-options">COMMON OPTIONS</h1>
<p>-F <em>FUNC</em>, --filter=<em>FUNC</em>
:   Set filter to trace selected functions and their children functions.
    This option can be used more than once.
    See <code>uftrace-replay</code>(1) for an explanation of filters.</p>
<p>-N <em>FUNC</em>, --notrace=<em>FUNC</em>
:   Set filter not to trace selected functions and their children functions.
    This option can be used more than once.
    See <code>uftrace-replay</code>(1) for an explanation of filters.</p>
<p>-C <em>FUNC</em>, --caller-filter=<em>FUNC</em>
:   Set filter to trace callers of selected functions only.
    This option can be used more than once.
    See <code>uftrace-replay</code>(1) for an explanation of filters.</p>
<p>-T <em>TRG</em>, --trigger=<em>TRG</em>
:   Set trigger on selected functions.  This option can be used more than once.
    See <code>uftrace-replay</code>(1) for an explanation of triggers.</p>
<p>-D <em>DEPTH</em>, --depth <em>DEPTH</em>
:   Set trace limit in nesting level.</p>
<p>-t <em>TIME</em>, --time-filter=<em>TIME</em>
:   Do not account functions which run under the time threshold.  If some
    functions explicitly have the 'trace' trigger applied, those are always
    accounted regardless of execution time.</p>
<p>-Z <em>SIZE</em>, --size-filter=<em>SIZE</em>
:   Do not show functions smaller than SIZE bytes.</p>
<p>-L <em>LOCATION</em>, --loc-filter=<em>LOCATION</em>
:   Set filter to trace selected source locations.
    This option can be used more than once.</p>
<p>--no-libcall
:   Do not show library calls.</p>
<p>--no-event
:   Do not show any events.  Implies <code>--no-sched</code>.</p>
<p>--no-sched
:   Do not show schedule events.</p>
<p>--no-sched-preempt
:   Do not show preempt schedule events
    but show regular(sleeping) schedule events.</p>
<p>--match=<em>TYPE</em>
:   Use pattern match using TYPE.  Possible types are <code>regex</code> and <code>glob</code>.
    Default is <code>regex</code>.</p>
<p>--with-syms=<em>DIR</em>
:   Read symbol data from the .sym files in <em>DIR</em> directory instead of the
    binary.  This can be useful to deal with stripped binaries.  The file name
    of the main binary should be the same when saved and used.</p>
<h1 id="common-analysis-options">COMMON ANALYSIS OPTIONS</h1>
<p>-H <em>FUNC</em>, --hide=<em>FUNC</em>
:   Set filter not to trace selected functions.
    It doesn't affect their subtrees, but hides only the given functions.
    This option can be used more than once.
    See <code>uftrace-replay</code>(1) for an explanation of filters.</p>
<p>--kernel-full
:   Show all kernel functions, including those called outside of user functions.</p>
<p>--kernel-only
:   Show kernel functions only without user functions.</p>
<p>--event-full
:   Show all (user) events outside of user functions.</p>
<p>--tid=<em>TID</em>[,<em>TID</em>,...]
:   Only print functions called by the given tasks.  To see the list of
    tasks in the data file, you can use <code>uftrace report --task</code> or
    <code>uftrace info</code>.  This option can also be used more than once.</p>
<p>--demangle=<em>TYPE</em>
:   Use demangled C++ symbol names for filters, triggers, arguments and/or
    return values.  Possible values are "full", "simple" and "no".  Default
    is "simple" which ignores function arguments and template parameters.</p>
<p>-r <em>RANGE</em>, --time-range=<em>RANGE</em>
:   Only show functions executed within the time RANGE.  The RANGE can be
    \&lt;start&gt;~\&lt;stop&gt; (separated by "~") and one of \&lt;start&gt; and \&lt;stop&gt; can
    be omitted.  The \&lt;start&gt; and \&lt;stop&gt; are timestamp or elapsed time if
    they have \&lt;time_unit&gt; postfix, for example '100us'.  The timestamp or
    elapsed time can be shown with <code>-f time</code> or <code>-f elapsed</code> option respectively
    in <code>uftrace replay</code>(1).</p>
<h1 id="example">EXAMPLE</h1>
<p>This command shows information like the following:</p>
<pre><code>$ uftrace record fibonacci
$ uftrace report
  Total time   Self time       Calls  Function
  ==========  ==========  ==========  ====================
    3.781 us    0.124 us           1  main
    3.657 us    3.657 us          41  fib
    0.345 us    0.345 us           1  __monstartup
    0.269 us    0.269 us           1  __cxa_atexit

$ uftrace report -s call,self
  Total time   Self time       Calls  Function
  ==========  ==========  ==========  ====================
    3.657 us    3.657 us          41  fib
    0.345 us    0.345 us           1  __monstartup
    0.269 us    0.269 us           1  __cxa_atexit
    3.781 us    0.124 us           1  main

$ uftrace report --avg-self
    Self avg    Self min    Self max   Self stdv  Function
  ==========  ==========  ==========  ==========  ====================
    0.414 us    0.414 us    0.414 us       0.00%   __monstartup
    0.356 us    0.356 us    0.356 us       0.00%   __cxa_atexit
    0.113 us    0.113 us    0.113 us       0.00%   main
    0.087 us    0.032 us    0.369 us      78.13%   fib

$ uftrace report --task
  Total time   Self time     TID   Num funcs  Task name
  ==========  ==========  ======  ==========  ====================
    4.395 us    4.395 us   28662          44  fibonacci

$ uftrace record --srcline abc
$ uftrace report --srcline
  Total time   Self time       Calls  Function [Source]
  ==========  ==========  ==========  ====================
   17.508 us    2.199 us           1  main [./tests/s-abc.c:26]
   15.309 us    2.384 us           1  a [./tests/s-abc.c:11]
   12.925 us    2.633 us           1  b [./tests/s-abc.c:16]
   10.292 us    5.159 us           1  c [./tests/s-abc.c:21]
    5.133 us    5.133 us           1  getpid
    3.437 us    3.437 us           1  __monstartup
    1.959 us    1.959 us           1  __cxa_atexit
</code></pre>
<p>To see a difference between two data:</p>
<pre><code>$ uftrace record abc

$ uftrace report --diff uftrace.data.old
#
# uftrace diff
#  [0] base: uftrace.data       (from uftrace record abc )
#  [1] diff: uftrace.data.old   (from uftrace record abc )
#
  Total time   Self time       Calls  Function
  ==========  ==========  ==========  ====================
   -0.301 us   -0.038 us          +0  main
   -0.263 us   -0.070 us          +0  a
   -0.193 us   -0.042 us          +0  b
   -0.151 us   -0.090 us          +0  c
   -0.131 us   -0.131 us          +0  __cxa_atexit
   -0.061 us   -0.061 us          +0  getpid
</code></pre>
<p>The above example shows difference sorted by absolute value of total time.
The following changes it to use (non-absolute) value of self time.</p>
<pre><code>$ uftrace report --diff uftrace.data.old -s self --diff-policy no-abs
#
# uftrace diff
#  [0] base: uftrace.data       (from uftrace record abc )
#  [1] diff: uftrace.data.old   (from uftrace record abc )
#
  Total time   Self time       Calls  Function
  ==========  ==========  ==========  ====================
   -0.301 us   -0.038 us          +0  main
   -0.193 us   -0.042 us          +0  b
   -0.061 us   -0.061 us          +0  getpid
   -0.263 us   -0.070 us          +0  a
   -0.151 us   -0.090 us          +0  c
   -0.131 us   -0.131 us          +0  __cxa_atexit
</code></pre>
<p>By using "full" policy, user can see raw data as well like below.
Also it's possible to sort by different column (for raw data).
The example below will sort output by total time of the base data.</p>
<pre><code>$ uftrace report --diff uftrace.data.old --sort-column 0 --diff-policy full,percent
#
# uftrace diff
#  [0] base: uftrace.data       (from uftrace record abc )
#  [1] diff: uftrace.data.old   (from uftrace record abc )
#
                 Total time (diff)                   Self time (diff)                  Nr. called (diff)   Function
  ================================   ================================   ================================   ====================
    2.812 us    2.511 us   -10.70%     0.403 us    0.365 us    -9.43%            1          1         +0   main
    2.409 us    2.146 us   -10.92%     0.342 us    0.272 us   -20.47%            1          1         +0   a
    2.067 us    1.874 us    -9.34%     0.410 us    0.368 us   -10.24%            1          1         +0   b
    1.657 us    1.506 us    -9.11%     0.890 us    0.800 us   -10.11%            1          1         +0   c
    0.920 us    0.789 us   -14.24%     0.920 us    0.789 us   -14.24%            1          1         +0   __cxa_atexit
    0.767 us    0.706 us    -7.95%     0.767 us    0.706 us    -7.95%            1          1         +0   getpid
</code></pre>
<h1 id="fields">FIELDS</h1>
<p>The uftrace allows user to customize the report output with a couple of fields.
By default it uses total, self and call fields, but you can use other fields
in any order like:</p>
<pre><code>$ uftrace report -f total,total-max,self-min,call
Total time   Total max    Self min       Calls  Function
==========  ==========  ==========  ==========  ====================
 97.234 us   36.033 us    1.073 us           3  lib_a
 50.552 us   26.690 us    2.828 us           2  lib_b
 46.806 us   46.806 us    3.290 us           1  main
 43.516 us   43.516 us    7.483 us           1  foo
 32.010 us   20.847 us    9.684 us           2  lib_c
</code></pre>
<p>Each field can be used as sort key:</p>
<pre><code>$ uftrace report -f total,total-max,self-min,call -s call
Total time   Total max    Self min       Calls  Function
==========  ==========  ==========  ==========  ====================
 97.234 us   36.033 us    1.073 us           3  lib_a
 50.552 us   26.690 us    2.828 us           2  lib_b
 32.010 us   20.847 us    9.684 us           2  lib_c
 43.516 us   43.516 us    7.483 us           1  foo
 46.806 us   46.806 us    3.290 us           1  main

$ uftrace report -f total,total-max,self-min,total-min,call -s self-min,total-min
Total time   Total max    Self min   Total min       Calls  Function
==========  ==========  ==========  ==========  ==========  ====================
 32.010 us   20.847 us    9.684 us   11.163 us           2  lib_c
 43.516 us   43.516 us    7.483 us   43.516 us           1  foo
 46.806 us   46.806 us    3.290 us   46.806 us           1  main
 50.552 us   26.690 us    2.828 us   23.862 us           2  lib_b
 97.234 us   36.033 us    1.073 us   27.763 us           3  lib_a
</code></pre>
<p>Each field can be used with --diff option:</p>
<pre><code>$ uftrace report --diff uftrace.data.old -f total,total-min
#
# uftrace diff
#  [0] base: uftrace.data       (from uftrace record test/t-lib)
#  [1] diff: uftrace.data.old   (from uftrace record test/t-lib)
#
 Total time     Total min   Function
===========   ===========   ====================
 +34.560 us     +9.884 us   lib_a
 +18.086 us     +8.517 us   lib_b
 +16.887 us    +16.887 us   main
 +15.479 us    +15.479 us   foo
 +10.600 us     +3.127 us   lib_c

$ uftrace report --diff uftrace.data.old -f total,total-min,self-avg --diff-policy full
#
# uftrace diff
#  [0] base: uftrace.data           (from uftrace record --srcline test/t-lib)
#  [1] diff: uftrace.data.old   (from uftrace record --srcline test/t-lib)
#
                  Total time (diff)                      Total min (diff)                       Self avg (diff)   Function
===================================   ===================================   ===================================   ====================
 14.616 us   13.796 us    +0.820 us     4.146 us    3.823 us    +0.323 us     0.443 us    0.459 us    -0.016 us   lib_a
  6.529 us    5.957 us    +0.572 us     6.529 us    5.957 us    +0.572 us     0.436 us    0.356 us    +0.080 us   main
  7.700 us    7.173 us    +0.527 us     3.677 us    3.426 us    +0.251 us     0.365 us    0.363 us    +0.002 us   lib_b
  6.093 us    5.601 us    +0.492 us     6.093 us    5.601 us    +0.492 us     0.741 us    0.476 us    +0.265 us   foo
  5.638 us    5.208 us    +0.430 us     2.346 us    2.187 us    +0.159 us     1.646 us    1.510 us    +0.136 us   lib_c
</code></pre>
<p>Each field has following meaning:</p>
<ul>
<li>total: total time of each function.</li>
<li>total-avg: average of total time of each function.</li>
<li>total-min: min of total time of each function.</li>
<li>total-max: max of total time of each function.</li>
<li>self: self time of each function.</li>
<li>self-avg: average of self time of each function.</li>
<li>self-min: min of self time of each function.</li>
<li>self-max: max of self time of each function.</li>
<li>call: called count of each function.</li>
</ul>
<p>The default value is 'total,self,call'.  If given field name starts with "+",
then it'll be appended to the default fields.  So "-f +total-avg" is as same as
"-f total,self,call,total-avg".  And it also accepts a special field name of
'none' which disables the field display and shows function output only.</p>
<h1 id="task-fields">TASK FIELDS</h1>
<ul>
<li>total: total time of each task.</li>
<li>self: self time of each task.</li>
<li>func: number of functions in the task.</li>
<li>tid: task ID.</li>
</ul>
<p>The default value is 'total,self,func,tid'. See <em>FIELDS</em> for field usage.</p>
<h1 id="see-also">SEE ALSO</h1>
<p><code>uftrace</code>(1), <code>uftrace-record</code>(1), <code>uftrace-replay</code>(1), <code>uftrace-tui</code>(1)</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
